{
	"name": "OPENFUND_RAW_TO_BUSINESS_EVENT_TRIGGER",
	"properties": {
		"description": "A trigger to grab data from raw folder to staging for Openfund files",
		"annotations": [],
		"runtimeState": "Stopped",
		"pipelines": [
			{
				"pipelineReference": {
					"referenceName": "PRODUCT_BUSINESS_ENRICHMENT",
					"type": "PipelineReference"
				},
				"parameters": {
					"sourceName": "product",
					"dataset": "openfund",
					"xlsFilePath": "@concat('/mnt/', triggerBody().folderPath,'/',triggerBody().fileName)",
					"guid": "@guid()",
					"startDate": "@concat(substring(triggerBody().fileName, add(lastIndexof(triggerBody().fileName, '_') ,1), 4),'-',substring(triggerBody().fileName, add(lastIndexof(triggerBody().fileName, '_') ,5), 2),'-',substring(triggerBody().fileName, add(lastIndexof(triggerBody().fileName, '_') ,7), 2))\n",
					"endDate": "@concat(substring(triggerBody().fileName, add(lastIndexof(triggerBody().fileName, '_') ,1), 4),'-',substring(triggerBody().fileName, add(lastIndexof(triggerBody().fileName, '_') ,5), 2),'-',substring(triggerBody().fileName, add(lastIndexof(triggerBody().fileName, '_') ,7), 2))\n",
					"fileIntegrationCondition": true
				}
			}
		],
		"type": "BlobEventsTrigger",
		"typeProperties": {
			"blobPathBeginsWith": "/raw/blobs/product/openfund/in/",
			"blobPathEndsWith": ".xlsx",
			"ignoreEmptyBlobs": true,
			"scope": "/subscriptions/87b720b3-fcb9-4bd5-8047-816efd16c823/resourceGroups/CGP-DEV-RG-EDM/providers/Microsoft.Storage/storageAccounts/cgpdevsaedm01",
			"events": [
				"Microsoft.Storage.BlobCreated"
			]
		}
	}
}